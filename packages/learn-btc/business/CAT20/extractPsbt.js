/* eslint-disable no-undef */
import bitcoin from 'bitcoinjs-lib';

const network = bitcoin.networks.bitcoin;

const guard_commit_psbt = bitcoin.Psbt.fromHex(
  '70736274ff01008902000000013b85b96914425ce741576cba86644338e7db5a42379d1c5f8cff0b45d7c5af950100000000ffffffff022202000000000000225120cd16ef613bf23c58466cfded54ad8a33cd5718375e1ba34f4068ff9d8e8d0c3d440f000000000000225120c74620836231d756058bebf18077552989a854c2b2b1f50213c97b0f64f62c3f000000000001012b881300000000000022512046b53173a24be5ed9b9ad1509fad18bfaf03e9549d3d28ff418a429cbec61fcf01089403403723795b88102b0108c0f7938ff5172dbf8a9bbe4fb4d2cd54990b4f2436dbf7c54cb63eb90aa60a0df36003ededcd2a8e3cc7d98879c7f8908a7bbc640accd02f2038e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9eac0063096361743230206665656821c138e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9e0001052038e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9e01063400c0312038e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9eac00630b6361743230206775617264680000',
  { network }
);
console.log(
  'commit hex1',
  guard_commit_psbt.extractTransaction().toBuffer().toString('hex')
);

const guard_reveal_psbt = bitcoin.Psbt.fromHex(
  '70736274ff0100db020000000391bb879cd8bed90acc51f6642ebcc2831ad4ce020916e6eb82ad88d455298cd50000000000fffffffff2af7dac82f315a359fcd877c01dd3e3287e02018c6a7016ab6d00df1fdc365c0000000000fffffffff2af7dac82f315a359fcd877c01dd3e3287e02018c6a7016ab6d00df1fdc365c0100000000ffffffff022202000000000000225120c74620836231d756058bebf18077552989a854c2b2b1f50213c97b0f64f62c3f7614060000000000225120c74620836231d756058bebf18077552989a854c2b2b1f50213c97b0f64f62c3f000000000001012b801a060000000000225120c74620836231d756058bebf18077552989a854c2b2b1f50213c97b0f64f62c3f01084201407240fd4d36cce3b8d106cdbdff34d0c0b21ef46048f64c5ed52694bfef7217372702f6944805e228fa8baea4a0039f34cbe2171267771c95bb5e1c64ab04f7bd0001012b2202000000000000225120cd16ef613bf23c58466cfded54ad8a33cd5718375e1ba34f4068ff9d8e8d0c3d01089603409ba1cad799cf9e43b3d46f2a4aa0ba1be3dd96d600cb77bf0d8828cb0b8136cb1384f263dc4f81c766b07db4fdb6d832167c75056a14c393c33ff369e8a6d7e1312038e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9eac00630b63617432302067756172646821c138e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9e0001012b440f000000000000225120c74620836231d756058bebf18077552989a854c2b2b1f50213c97b0f64f62c3f0108420140a94c3735a6b403cb21166de651bd1c1763b238068d87baf90e72dc69d0b46cfb6826ac802cc27fe376411067a20cf0d0a3d89a30dbfaa978a5486e20dff2fa820001052038e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9e0001052038e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9e00',
  { network }
);

console.log(
  'reveal hex',
  guard_reveal_psbt.extractTransaction().toBuffer().toString('hex')
);

const guard_reveal_psbt_unsigned = bitcoin.Psbt.fromHex(
  '70736274ff0100db020000000391bb879cd8bed90acc51f6642ebcc2831ad4ce020916e6eb82ad88d455298cd50000000000fffffffff2af7dac82f315a359fcd877c01dd3e3287e02018c6a7016ab6d00df1fdc365c0000000000fffffffff2af7dac82f315a359fcd877c01dd3e3287e02018c6a7016ab6d00df1fdc365c0100000000ffffffff022202000000000000225120c74620836231d756058bebf18077552989a854c2b2b1f50213c97b0f64f62c3f7614060000000000225120c74620836231d756058bebf18077552989a854c2b2b1f50213c97b0f64f62c3f000000000001012b801a060000000000225120c74620836231d756058bebf18077552989a854c2b2b1f50213c97b0f64f62c3f01172038e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9e0001012b2202000000000000225120cd16ef613bf23c58466cfded54ad8a33cd5718375e1ba34f4068ff9d8e8d0c3d2215c138e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9e322038e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9eac00630b636174323020677561726468c00001012b440f000000000000225120c74620836231d756058bebf18077552989a854c2b2b1f50213c97b0f64f62c3f01172038e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9e0001052038e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9e0001052038e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9e00',
  { network }
);

console.log(
  'reveal hex_unsigned',
  guard_reveal_psbt_unsigned.extractTransaction().toBuffer().toString('hex')
);

// 对应操作
try {
  let res = await okxwallet.fractalBitcoin.signPsbts([
    '70736274ff01008902000000013b85b96914425ce741576cba86644338e7db5a42379d1c5f8cff0b45d7c5af950100000000ffffffff022202000000000000225120cd16ef613bf23c58466cfded54ad8a33cd5718375e1ba34f4068ff9d8e8d0c3d440f000000000000225120c74620836231d756058bebf18077552989a854c2b2b1f50213c97b0f64f62c3f000000000001012b881300000000000022512046b53173a24be5ed9b9ad1509fad18bfaf03e9549d3d28ff418a429cbec61fcf2215c138e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9e302038e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9eac00630963617432302066656568c00001052038e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9e01063400c0312038e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9eac00630b6361743230206775617264680000',
    '70736274ff0100db020000000391bb879cd8bed90acc51f6642ebcc2831ad4ce020916e6eb82ad88d455298cd50000000000fffffffff2af7dac82f315a359fcd877c01dd3e3287e02018c6a7016ab6d00df1fdc365c0000000000fffffffff2af7dac82f315a359fcd877c01dd3e3287e02018c6a7016ab6d00df1fdc365c0100000000ffffffff022202000000000000225120c74620836231d756058bebf18077552989a854c2b2b1f50213c97b0f64f62c3f7614060000000000225120c74620836231d756058bebf18077552989a854c2b2b1f50213c97b0f64f62c3f000000000001012b801a060000000000225120c74620836231d756058bebf18077552989a854c2b2b1f50213c97b0f64f62c3f01172038e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9e0001012b2202000000000000225120cd16ef613bf23c58466cfded54ad8a33cd5718375e1ba34f4068ff9d8e8d0c3d2215c138e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9e322038e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9eac00630b636174323020677561726468c00001012b440f000000000000225120c74620836231d756058bebf18077552989a854c2b2b1f50213c97b0f64f62c3f01172038e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9e0001052038e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9e0001052038e89eaa13b42627993047ff16425362813b7dae4d2a6f948e34574c17e59b9e00',
  ]);
  console.log(res);
} catch (e) {
  console.log(e);
}
